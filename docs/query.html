<!doctype html>
<html lang="en"><head>
    <meta charset="utf-8">
    <title>Query Builder</title>
    <!-- Mobile viewport optimized -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- Mobile Internet Explorer allows us to activate ClearType technology for smoothing fonts for easy reading -->
    <meta http-equiv="cleartype" content="on">

    <!-- Le styles -->
    <link href="css/bootswatch/Cosmo/bootstrap.min.css" rel="stylesheet">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/black-tie/jquery-ui.css" rel="stylesheet">
    <link href="css/jquery.tocify.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet" type="text/css">
    <link href="css/styles.css" rel="stylesheet" type="text/css">
    <link href="css/rainbow/themes/tomorrow-night.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/rainbowlines/theme.css" media="screen" />
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link href="../assets/ico/favicon.ico" rel="shortcut icon">
    <link href="../assets/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144">
    <link href="../assets/ico/apple-touch-icon-114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114">
    <link href="../assets/ico/apple-touch-icon-72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72">
    <link href="../assets/ico/apple-touch-icon-57-precomposed.png" rel="apple-touch-icon-precomposed">
  </head>

  <body>
    <a id="fork-me" href="#" target="_blank"><img style="border: 0px currentColor; border-image: none; top: 0px; right: 0px; position: fixed; z-index: 999999;" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>
   <nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="margin-bottom:120px;">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="#">Oriento</a>
  </div>

  <!-- Collect the nav links, forms, and other content for toggling -->
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="nav navbar-nav">
      <li class="active"><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="#">Action</a></li>
          <li><a href="#">Another action</a></li>
          <li><a href="#">Something else here</a></li>
          <li class="divider"></li>
          <li><a href="#">Separated link</a></li>
          <li class="divider"></li>
          <li><a href="#">One more separated link</a></li>
        </ul>
      </li>
    </ul>
  </div><!-- /.navbar-collapse -->
</nav>
     

    <div class="container-fluid" style="margin-top:50px;">
      <div class="row">
        <div class="tocify col-sm-3 col-md-3">
          <div id="toc">
          </div><!--/.well -->
        </div><!--/span-->
        <div class="col-sm-9 col-md-9">
          <div class="jumbotron">
            <h1>
                
                
                <h1 id="query-builder">Query Builder</h1>
<h3 id="query-builder-insert-record">Query Builder: Insert Record</h3>

                
                <div class='highlight'><pre>
db.insert().into(<span class="hljs-string">'OUser'</span>).set({name: <span class="hljs-string">'demo'</span>, password: <span class="hljs-string">'demo'</span>, status: <span class="hljs-string">'ACTIVE'</span>}).one()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(user)</span> {</span>
    console.log(<span class="hljs-string">'created'</span>, user);
  });

### Query Builder: Update Record

db.update(<span class="hljs-string">'OUser'</span>).set({password: <span class="hljs-string">'changed'</span>}).where({name: <span class="hljs-string">'demo'</span>}).scalar()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(total)</span> {</span>
    console.log(<span class="hljs-string">'updated'</span>, total, <span class="hljs-string">'users'</span>);
  });


### Query Builder: Delete Record

db.delete().from(<span class="hljs-string">'OUser'</span>).where({name: <span class="hljs-string">'demo'</span>}).limit(<span class="hljs-number">1</span>).scalar()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(total)</span> {</span>
    console.log(<span class="hljs-string">'deleted'</span>, total, <span class="hljs-string">'users'</span>);
  });

### Query Builder: Select Records

db.select().from(<span class="hljs-string">'OUser'</span>).where({status: <span class="hljs-string">'ACTIVE'</span>}).all()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(users)</span> {</span>
    console.log(<span class="hljs-string">'active users'</span>, users);
  });

### Query Builder: Select Records <span class="hljs-keyword">with</span> Fetch Plan

db.select().from(<span class="hljs-string">'OUser'</span>).where({status: <span class="hljs-string">'ACTIVE'</span>}).fetch({role: <span class="hljs-number">5</span>}).all()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(users)</span> {</span>
    console.log(<span class="hljs-string">'active users'</span>, users);
  });

### Query Builder: Select an expression

db.select(<span class="hljs-string">'count(*)'</span>).from(<span class="hljs-string">'OUser'</span>).where({status: <span class="hljs-string">'ACTIVE'</span>}).scalar()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(total)</span> {</span>
    console.log(<span class="hljs-string">'total active users'</span>, total);
  });

### Query Builder: Traverse Records

db.traverse().from(<span class="hljs-string">'OUser'</span>).where({name: <span class="hljs-string">'guest'</span>}).all()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(records)</span> {</span>
    console.log(<span class="hljs-string">'found records'</span>, records);
  });

### Query Builder: Return a specific column

db
  .select(<span class="hljs-string">'name'</span>)
  .from(<span class="hljs-string">'OUser'</span>)
  .where({status: <span class="hljs-string">'ACTIVE'</span>})
  .column(<span class="hljs-string">'name'</span>)
  .all()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(names)</span> {</span>
    console.log(<span class="hljs-string">'active user names'</span>, names.join(<span class="hljs-string">', '</span>));
  });


### Query Builder: Transform a field

db
  .select(<span class="hljs-string">'name'</span>)
  .from(<span class="hljs-string">'OUser'</span>)
  .where({status: <span class="hljs-string">'ACTIVE'</span>})
  .transform({
    status: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(status)</span> {</span>
      <span class="hljs-keyword">return</span> status.toLowerCase();
    }
  })
  .limit(<span class="hljs-number">1</span>)
  .one()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(user)</span> {</span>
    console.log(<span class="hljs-string">'user status: '</span>, user.status); <span class="hljs-comment">// 'active'</span>
  });


### Query Builder: Transform a record

db
  .select(<span class="hljs-string">'name'</span>)
  .from(<span class="hljs-string">'OUser'</span>)
  .where({status: <span class="hljs-string">'ACTIVE'</span>})
  .transform(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(record)</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> User(record);
  })
  .limit(<span class="hljs-number">1</span>)
  .one()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(user)</span> {</span>
    console.log(<span class="hljs-string">'user is an instance of User?'</span>, (user <span class="hljs-keyword">instanceof</span> User)); <span class="hljs-comment">// true</span>
  });

### Query Builder: Specify <span class="hljs-keyword">default</span> values

db
  .select(<span class="hljs-string">'name'</span>)
  .from(<span class="hljs-string">'OUser'</span>)
  .where({status: <span class="hljs-string">'ACTIVE'</span>})
  .defaults({
    something: <span class="hljs-number">123</span>
  })
  .limit(<span class="hljs-number">1</span>)
  .one()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(user)</span> {</span>
    console.log(user.name, user.something);
  });
```</pre></div>
                
                
            </h1>
          </div>

          
          <div class="fleur">h</div>

          <br>
          <h2>Contributing</h2>
          <p class="well">
              Take care to maintain the existing coding style. Add <strong>Enter Unit Testing Framework</strong> unit tests for any new or changed functionality. Lint and test your code using <strong>Enter Build Tool Here</strong>.
          </p>
          <p class="well">
              <span class="note">
                  After you have verified your code, send a pull request to the <em>Enter Project Name Here</em> develop branch.  After you send a pull request, you will hear back from me shortly after I review your code.  You’ll find source code in the <code>src</code> subdirectory!
              </span>
          </p>
          <br>
          <h2>Extending</h2>
          <p class="well">
              If you find that you need a feature that <em>Enter Project Name Here</em> does not currently support, either let me know via the <a href="#" target="_blank">Github issue tracker</a>, or <a href="#" target="_blank">fork the project</a> and and easily extend <em>Enter Project Name Here</em>!
          </p>
		  <br>
		<h2>Copyright</h2>
        <p class="well">
            Copyright © 2013 Enter Author Name Here
        </p>
      </div>
      </div><!--/row-->
          
    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/rainbow/rainbow.min.js"></script>
    <script src="js/rainbow/language/generic.js"></script>
    <script src="js/rainbow/language/html.js"></script>
    <script src="js/rainbow/language/css.js"></script>
    <script src="js/rainbow/language/javascript.js"></script>
    <script src="js/rainbowlines/rainbow.linenumbers.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.tocify.min.js"></script>
    <script src="js/prettify.js"></script>

    <script>
        $(function() {

          $("#toc").tocify({ selectors: "h2, h3, h4", scrollTo: 60, highlightOffset: 60, extendPage: true });

          prettyPrint();

          $(".optionName").popover({ trigger: "hover", container: "body" });

          $("a[href='#']").click(function(event) {

              event.preventDefault();

          });

          Rainbow.color();
        });
    </script>
  
</div></body></html>